<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Login - Secure Chat Demo</title>
    <style>
        body { font-family: sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; background: #f4f4f4; }
        .card { background: white; padding: 40px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); text-align: center; }
        button { background: #eb5424; color: white; border: none; padding: 10px 20px; font-size: 16px; border-radius: 4px; cursor: pointer; }
        button:hover { background: #d0431b; }
    </style>
</head>
<body>

    <div class="card">
        <h1>Customer Portal</h1>
        <p>Please log in to access support.</p>
        <button onclick="login()">Log In with Auth0</button>
    </div>

    <script>
        // --- CONFIGURATION ---
        const CONFIG = {
            domain: "dev-0ds2lps500xulygz.uk.auth0.com",
            clientId: "etyzcqmFckYtsLOH3HhLieK6yRNy254z",
            redirectUri: "https://tdurbin.github.io/auth/chat.html"
        };

        function login() {
            // 1. Create a random nonce (Required when requesting id_token)
            const nonce = "nonce-" + Math.random().toString(36).substring(2) + Date.now();
            
            // 2. Construct the Auth0 URL
            // We request "code" (for backend security) AND "id_token" (for frontend identity)
            const url = `https://${CONFIG.domain}/authorize?` + 
                        `response_type=code id_token` +
                        `&client_id=${CONFIG.clientId}` +
                        `&redirect_uri=${encodeURIComponent(CONFIG.redirectUri)}` +
                        `&scope=openid profile email offline_access` +
                        `&nonce=${nonce}`;

            // 3. Redirect
            window.location.href = url;
        }
    </script>
</body>
</html>