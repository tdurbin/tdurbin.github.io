(function(){function ir(n){switch(n){case"'":return"&#39;";case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"Â©":return"&copy;";case"\u2028":return"<br>";case"\u2029":return"<p>";default:return n}}function i(){}function h(){}function si(n){i.prototype.init.call(this,n,i.TYPE.STANDARD)}function hi(n){return r[n]||(r[n]=new si(n)),r[n]}function ct(n,t){i.prototype.init.call(this,t+"_"+n,i.TYPE.AGENT)}function rt(n,t){var f=t+"_"+n,u,i;return r[f]||(u=new ct(n,t),r[n]&&(i=r[n],i.endpoint&&u.setEndpoint(i.endpoint),i.prechat&&u.setPrechat(i.prechat),i.language&&u.setLanguage(i.language),u.setOnlineState(i.onlineState)),r[f]=u),r[f]}function lt(n,t){h.prototype.init.call(this,n,t)}function at(n,t){h.prototype.init.call(this,n,t)}function f(n){i.prototype.init.call(this,n,i.TYPE.INVITE);this.active=!1;this.filterLogic=null;this.rules={};this.autoRejectTimeout=this.inviteTimeout=this.inviteDelay=this.ruleTree=null}function c(n){return r[n]||(r[n]=new f(n)),r[n]}function y(t,i,r,u,e,o,s,c){h.prototype.init.call(this,t,i);this.hasInviteAfterAccept=o;this.hasInviteAfterReject=s;this.rejectTime=c;this.renderer=null!==n.getCssAnimation(i)||"Custom"==r?new f.RENDERER[r].renderClass(t,i,f.START_POSITION[u],f.END_POSITION[e]):new f.RENDERER.Appear.renderClass(t,i,f.START_POSITION[u],f.END_POSITION[e])}function b(n){return c(n)?c(n).getTracker():null}function s(){}function tt(n,t,i,r){s.prototype.init.call(this,n,t,i,r)}function it(n,t,i,r){s.prototype.init.call(this,n,t,null,r)}function ut(n,t,i,r){s.prototype.init.call(this,n,t,null,r)}function k(n,t){k.prototype.init.call(this,n,t,null,null)}function u(){}function ft(n,t,i,r,f){u.prototype.init.call(this,n,t,i,r,f)}function et(n,t,i,r,f){u.prototype.init.call(this,n,t,i,r,f)}function vt(n,t,i,r,f){u.prototype.init.call(this,n,t,i,r,f)}function d(n){if(ri++,1e3<ri)throw Error("Error processing rule filter logic, preventing recursion");for(var r=0,t=0,i=0;i<n.length;i++)"("==n.charAt(i)?t++:")"==n.charAt(i)&&t--,","==n.charAt(i)&&1==t&&(r=i);if(0==n.indexOf("AND("))return t=d(n.substring(4,r)),n=d(n.substring(r+1,n.length-1)),new pt(t,n);if(0==n.indexOf("OR("))return t=d(n.substring(3,r)),n=d(n.substring(r+1,n.length-1)),new wt(t,n);if(0==n.indexOf("NOT("))return t=d(n.substring(4,n.length-1)),new bt(t);if(!isNaN(parseInt(n,10)))return new yt(parseInt(n,10));throw Error("Encountered unexpected character in filter logic");}function v(){}function yt(n){this.ruleId=n;v.prototype.init.call(this,null,null)}function pt(n,t){v.prototype.init.call(this,n,t)}function wt(n,t){v.prototype.init.call(this,n,t)}function bt(n){v.prototype.init.call(this,n,null)}function rr(i,r,u,f){var s=document.createElement("div"),o;return s.id="liveagent_invite_button_"+i,o=document.createElement("img"),o.style.cursor="pointer",o.style.position="absolute",o.style.right="-20px",o.style.top="-20px",o.src=n.addPrefixToURL(t.contentServerUrl,t.urlPrefix,!0)+"/images/x.png",n.addEventListener(o,"click",function(){e.rejectChat(i)}),s.appendChild(o),o=document.createElement("img"),o.style.cursor="pointer",o.style.clear="right",o.src=r,o.width=u,o.height=f,n.addEventListener(o,"click",function(){e.startChat(i)}),s.appendChild(o),document.body.appendChild(s),s}function ci(n,t,i){"undefined"==typeof i&&(i=!0);this.getLabel=function(){return n};this.getValue=function(){return t};this.getDisplayToAgent=function(){return i};var r=new kt;this.getMapper=function(){return r};this.doKnowledgeSearch=!1;this.getDoKnowledgeSearch=function(){return this.doKnowledgeSearch};this.setDoKnowledgeSearch=function(){this.doKnowledgeSearch=!0}}function kt(){var n=[],t=[];this.getEntityMaps=function(){return n};this.getTranscriptFields=function(){return t}}function li(n,t,i,r,u){this.getEntityName=function(){return n};this.getFieldName=function(){return t};this.getFastFill=function(){return i};this.getAutoQuery=function(){return r};this.getExactMatch=function(){return u}}function ai(n){this.saveToTranscript="";this.showOnCreate=!1;this.linkToEntityField=this.linkToEntityName="";var t=new vi;this.getEntityName=function(){return n};this.getSaveTranscript=function(){return this.saveTranscript};this.getShowOnCreate=function(){return this.showOnCreate};this.getLinkToEntityName=function(){return this.linkToEntityName};this.getLinkToEntityField=function(){return this.linkToEntityField};this.getEntityMapper=function(){return t};this.setSaveTranscript=function(n){this.saveTranscript=n};this.setShowOnCreate=function(n){this.showOnCreate=n};this.setLinkToEntityName=function(n){this.linkToEntityName=n};this.setLinkToEntityField=function(n){this.linkToEntityField=n}}function vi(){var n=[];this.getEntityFieldsMaps=function(){return n}}function yi(n,t,i,r,u){this.getFieldName=function(){return n};this.getLabel=function(){return t};this.getDoFind=function(){return i};this.getIsExactMatch=function(){return r};this.getDoCreate=function(){return u}}function ot(){if(!gi){if(gi=!0,n.log("DOM is ready. Setting up environment."),null==l.getOref()&&l.setOref(document.referrer),null==l.getVisitCount()&&l.setVisitCount(1),window._laq)for(var t=0;t<window._laq.length;t++)window._laq[t].call(window);o.connection.setCallback("liveagent._.handlePing");pi()}}function pi(){var i=[],r={};ui&&(r.chatted=1);a?(r.sid=a,n.log("Reusing existing session.")):(i.push(new o.Noun("VisitorId")),n.log("Requesting new session."));i.push(new o.Noun("Settings",{buttonIds:"["+bi()+"]",updateBreadcrumb:1,urlPrefix:t.urlPrefix}));o.connection.send(i,r)}function wi(n,t){t.endpointUrl&&n.setEndpoint(t.endpointUrl);t.prechatUrl&&n.setPrechat(t.prechatUrl);t.language&&n.setLanguage(t.language);n.setOnlineState(t.isAvailable)}function ur(){var t,i;o.connection.isRunning()&&(null==a?pi():(n.log("Pinging server to keep presence"),ht=null,t={},t.sid=a,ui&&(t.chatted=1),t.r=(new Date).getMilliseconds(),i=[new o.Noun("Availability",{ids:"["+bi()+"]"})],o.connection.send(i,t)))}function dt(){n.log("Disconnecting from Live Agent");o.connection.setIsRunning(!1);for(var t in r)r.hasOwnProperty(t)&&r[t].setOnlineState(!1)}function bi(){var f=[],e={},o,n,u,t;for(o in r)r.hasOwnProperty(o)&&r[o].getType()==i.TYPE.STANDARD&&(e[o]=r[o]);for(n in e)f.push(n);e={};for(u in r)r.hasOwnProperty(u)&&r[u].getType()==i.TYPE.AGENT&&(e[u]=r[u]);for(n in e)f.push(n);u={};for(t in r)r.hasOwnProperty(t)&&r[t].getType()==i.TYPE.INVITE&&(u[t]=r[t]);for(n in u)f.push(n);for(n="",t=0;t<f.length;t++)n+=f[t],t<f.length-1&&(n+=",");return n}function ki(n,i,u,f){document.cookie="liveagent_chatted=1;path=/;";ui=!0;var e;e="deployment_id="+t.deploymentId;e=e+"&org_id="+t.orgId;e+="&button_id=";e+=n;u&&(e+="&agent_id=",e+=u);f&&(e+="&do_fallback=1");e+="&session_id=";e+=a;n=u?r[u+"_"+n].getEndpoint(e):r[n].getEndpoint(e);t.chatWindowHeight=1;u="height="+t.chatWindowHeight;t.chatWindowWidth=1;u=u+",width="+t.chatWindowWidth;u+=",menubar=no";u+=",toolbar=no";u+=",location=no";u+=",personalbar=no";fr(i,n,e)}function fr(i,r,u){function e(n,t,i){var r=document.createElement("input");r.name=t;r.value=i;n.appendChild(r)}var o=l.getVisitCount(),f;null==o&&(o="0");f=document.createElement("form");f.style.display="none";e(f,"deploymentId",t.deploymentId);e(f,"orgId",t.orgId);e(f,"vc",o);e(f,"sid",a);e(f,"ptid",l.getPermanentId());e(f,"det",n.jsonEncode(nr));e(f,"oref",l.getOref());e(f,"pages",n.jsonEncode(p.getPages()));e(f,"sessionStart",(new Date).getTime()-p.getSessionStart());e(f,"ent",n.jsonEncode(tr));fi&&e(f,"visitorName",fi);f.method="POST";f.action=r;f.target=i;callPostToSalesforce(f,u)}function gt(t){t?n.log("Server Warning: "+t):n.log("Server sent an anoymous warning.")}function di(t){t?n.log("Server Error: "+t):n.log("Server responded with an error.");dt()}var e,ri,w,o;if(!window.liveAgentDeployment){window.liveAgentDeployment=!0;e={};window.liveagent&&(e=window.liveagent);window.liveagent=e;var n={getCookie:function(n){var t=document.cookie,i=t.indexOf(n+"=");return-1==i?null:(i+=(n+"=").length,n=t.indexOf(";",i),-1==n&&(n=t.length),t.substring(i,n))},setCookie:function(n,t,i){n=n+"="+t+";";i&&(i=new Date,i.setFullYear(i.getFullYear()+10),n+="expires="+i.toGMTString()+";");document.cookie=n+"path=/;"},addEventListener:function(n,t,i){if(n.addEventListener)n.addEventListener(t,i,!1);else if(n.attachEvent)n.attachEvent("on"+t,i,!1);else throw Error("Could not add event listener");},log:function(n){st&&window.console&&window.console.log&&window.console.log("LIVE AGENT: "+n)},logGroupStart:function(t){st&&window.console&&(window.console.group?window.console.groupCollapsed("LIVE AGENT: "+t):n.log(t))},logGroupEnd:function(){st&&window.console&&window.console.group&&window.console.groupEnd()},getLanguage:function(){return"undefined"!=typeof window.navigator.language?window.navigator.language:"undefined"!=typeof window.navigator.userLanguage?window.navigator.userLanguage:""},arrayHasItem:function(n,t){if(Array.prototype.indexOf)return-1<n.indexOf(t);for(var i=0;i<n.length;i++)if(n[i]==t)return!0},jsonEncode:function(n,t,i){function e(n){return o.lastIndex=0,o.test(n)?'"'+n.replace(o,function(n){var t=c[n];return"string"==typeof t?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}function f(n,t){var o,l,c,a,v=r,s,i=t[n];i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(n));"function"==typeof u&&(i=u.call(t,n,i));switch(typeof i){case"string":return e(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(r+=h,s=[],"[object Array]"===Object.prototype.toString.apply(i)){for(a=i.length,o=0;o<a;o+=1)s[o]=f(o,i)||"null";return c=0===s.length?"[]":r?"[\n"+r+s.join(",\n"+r)+"\n"+v+"]":"["+s.join(",")+"]",r=v,c}if(u&&"object"==typeof u)for(a=u.length,o=0;o<a;o+=1)"string"==typeof u[o]&&(l=u[o],(c=f(l,i))&&s.push(e(l)+(r?": ":":")+c));else for(l in i)Object.prototype.hasOwnProperty.call(Object(i),l)&&(c=f(l,i))&&s.push(e(l)+(r?": ":":")+c);return c=0===s.length?"{}":r?"{\n"+r+s.join(",\n"+r)+"\n"+v+"}":"{"+s.join(",")+"}",r=v,c}}if("undefined"!=typeof window.JSON)return window.JSON.stringify(n,t,i);if(void 0===n||null===n)return"null";var o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,c={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},s,r="",h="",u=t;if("number"==typeof i)for(s=0;s<i;s+=1)h+=" ";else"string"==typeof i&&(h=i);if(t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw Error("Error during JSON.stringify");return f("",{"":n})},jsonDecode:function(a){if(a=String(a),"undefined"!=typeof window.JSON)return window.JSON.parse(a);var b=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;if(b.lastIndex=0,b.test(a)&&(a=a.replace(b,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return eval("("+a+")");throw Error("Error during JSON.parse");},getCssAnimation:function(n){var i=["Webkit","Moz","O","ms","Khtml"],t;if(void 0!==n.style.animationName)return"";for(t=0;t<i.length;t++)if(void 0!==n.style[i[t]+"AnimationName"])return i[t].toLowerCase();return null},addPrefixToURL:function(t,i,r){if(!n.isEmpty(t)&&!n.isEmpty(i)&&0!==t.indexOf(i)){r&&(i=n.escapeToHtml(i));var u=/(https?:\/\/)(.*)/i;r=t.replace(u,"$1");t=t.replace(u,"$2");i=i.replace(u,"$2");t=r+i+"/"+t}return t},getDomainFromUrl:function(t){if(n.isEmpty(t))return"";var i;return ni||(ni=document.createElement("a")),i=ni,i.href=t,t=t.match(/:(\d+)/g),i=i.protocol+"//"+i.hostname||window.location.protocol+"//"+window.location.hostname,t?i+t[0]:i},isEmpty:function(n){return null===n||void 0===n||""===n},escapeToHtml:function(n){return null===n||void 0===n||""===n?"":n=n.replace(/[&<>"'\u00a9\u2028\u2029]/g,ir)},isValidEntityId:function(n){return n&&"string"==typeof n&&(18===n.length||15===n.length)},getKeyPrefix:function(n){return this.isValidEntityId(n)?n.substr(0,3):null},isOrganizationId:function(n){return"00D"===this.getKeyPrefix(n)},isDeploymentId:function(n){return"572"===this.getKeyPrefix(n)}},ni,l={getVisitCount:function(){var t=parseInt(n.getCookie("liveagent_vc"),10);return isNaN(t)?null:t},getOref:function(){return n.getCookie("liveagent_oref")},getPermanentId:function(){var t=n.getCookie("liveagent_ptid");return null!=t?t:""},setVisitCount:function(t){n.setCookie("liveagent_vc",t,!0)},setOref:function(t){return n.setCookie("liveagent_oref",t,!0)},setPermanentId:function(t){n.setCookie("liveagent_ptid",t,!0)}},p=new function(){function i(){return window.localStorage?window.localStorage:window.sessionStorage}function r(){var n=document.createElement("div");return n.style.display="none",document.body.appendChild(n),n.id="liveagent_userdata_provider",n.addBehavior("#default#userData"),n.load("liveagent"),{getItem:function(t){return n.getAttribute(t)},setItem:function(t,i){n.setAttribute(t,i);n.save("liveagent")},removeItem:function(t){n.removeAttribute(t);n.save("liveagent")}}}function f(){var n={};return{getItem:function(t){return n[t]},setItem:function(t,i){n[t]=i},removeItem:function(t){delete n[t]}}}function u(){n.setItem(t.SESSION_ID,a);n.setItem(t.PAGE_COUNT,"0");n.setItem(t.SESSION_START,(new Date).getTime().toString())}var t={SESSION_ID:"liveAgentSid",PAGE_COUNT:"liveAgentPc",SESSION_START:"liveAgentStart",PAGE:"liveAgentPage_",PAGE_TIME:"liveAgentPageTime_"},n;i.isSupported=function(){try{if(window.localStorage||window.sessionStorage){var n=window.localStorage?window.localStorage:window.sessionStorage;return n.setItem("liveAgentTestKey","1"),n.removeItem("liveAgentTestKey"),!0}return!1}catch(t){return!1}};r.isSupported=function(){return document.createElement("div").addBehavior};n=i.isSupported()?i():r.isSupported()?r():f();this.init=function(){if(n.getItem(t.SESSION_ID)){if(n.getItem(t.SESSION_ID)!=a){n.removeItem(t.SESSION_START);for(var i=n.getItem(t.PAGE_COUNT),r=25>i?0:i-25;r<i;r++)n.removeItem(t.PAGE+r),n.removeItem(t.PAGE_TIME+r);u()}}else u();i=parseInt(n.getItem(t.PAGE_COUNT),10);25<=i&&(n.removeItem(t.PAGE+(i-25)),n.removeItem(t.PAGE_TIME+(i-25)));n.setItem(t.PAGE_COUNT,(i+1).toString());n.setItem(t.PAGE+i.toString(),window.location.href);n.setItem(t.PAGE_TIME+i.toString(),(new Date).getTime())};this.getPageCount=function(){return parseInt(n.getItem(t.PAGE_COUNT),10)};this.getSessionStart=function(){return n.getItem(t.SESSION_START)};this.getPages=function(){for(var u=[],r=this.getPageCount(),i=25>r?0:r-25;i<r;i++)u.unshift({location:n.getItem(t.PAGE+i.toString()),time:((new Date).getTime()-parseInt(n.getItem(t.PAGE_TIME+i.toString()),10)).toString()});return u};this.getCurrentPage=function(){return n.getItem(t.PAGE+(this.getPageCount()-1).toString())};this.clear=function(){n.clear()}};i.TYPE={STANDARD:"STANDARD",INVITE:"INVITE",AGENT:"AGENT"};i.EVENT={BUTTON_AVAILABLE:"BUTTON_AVAILABLE",BUTTON_UNAVAILABLE:"BUTTON_UNAVAILABLE",BUTTON_ACCEPTED:"BUTTON_ACCEPTED",BUTTON_REJECTED:"BUTTON_REJECTED"};i.prototype.init=function(n,t){this.buttonId=n;this.type=t;this.onlineState=null;this.trackers=[];this.language=this.prechat=this.endpoint=null};i.prototype.getType=function(){return this.type};i.prototype.getOnlineState=function(){return this.onlineState};i.prototype.setOnlineState=function(n){this.onlineState=n;for(var t=0;t<this.trackers.length;t++)this.trackers[t].setState(n)};i.prototype.addTracker=function(n){this.trackers.push(n)};i.prototype.setPrechat=function(n){this.prechat=n};i.prototype.setEndpoint=function(n){this.endpoint=n};i.prototype.getEndpoint=function(i){function r(){var r=t.contentServerUrl,u=t.urlPrefix;if(null==r)throw Error("You cannot call liveagent.startChat until the asynchronous call to liveagent.init has completed!");return t.contentServerUrl=n.addPrefixToURL(r,u,!0),r=this.endpoint,r=!n.isEmpty(r)&&-1<n.getDomainFromUrl(r).indexOf("force")?n.addPrefixToURL(r,u,!0):r,this.endpoint=r,r=(null!=this.endpoint?this.endpoint:t.contentServerUrl+t.chatPage)+"?language="+(this.language?this.language:""),n.isEmpty(u)||(r+="&proxy="+u+"&proxyKey="+t.prefixKey+"&org_id="+t.orgId+"&deployment_id="+t.deploymentId),r+("#"+i)}var u=null,u=null==this.prechat?r.call(this):this.prechat+"?endpoint="+encodeURIComponent(r.call(this));return t.contentServerUrl+t.prechatHandler+"?endpoint="+encodeURIComponent(u)};i.prototype.setLanguage=function(n){this.language=n};i.prototype.startChat=function(n){return this.dispatchEvent(i.EVENT.BUTTON_ACCEPTED)?(ki(this.buttonId,n),!0):!1};i.prototype.rejectChat=function(){return this.dispatchEvent(i.EVENT.BUTTON_REJECTED)?!0:!1};i.prototype.dispatchEvent=function(n){return ei.hasOwnProperty(this.buttonId)?!1===ei[this.buttonId].call(this,n)?!1:!0:!0};h.prototype.init=function(n,t){this.buttonId=n;this.element=t};h.prototype.getId=function(){return this.buttonId};h.prototype.setState=function(t){return n.log("Setting state for button "+this.buttonId+" to "+(t?"online":"offline")),r[this.buttonId].dispatchEvent(t?i.EVENT.BUTTON_AVAILABLE:i.EVENT.BUTTON_UNAVAILABLE)?!0:!1};si.prototype=new i;ct.prototype=new i;ct.prototype.startChat=function(n,t){if(this.dispatchEvent(i.EVENT.BUTTON_ACCEPTED)){var r=this.buttonId.split("_");return ki(r[1],n,r[0],t),!0}return!1};lt.prototype=new h;lt.prototype.setState=function(n){h.prototype.setState.call(this,n)&&(this.element.style.display=n?"":"none")};at.prototype=new h;at.prototype.setState=function(n){h.prototype.setState.call(this,n)&&(this.element.style.display=n?"none":"")};var ti=!1,g=null,ii={},nt={};f.prototype=new i;f.RENDERER={Slide:{renderClass:tt},Fade:{renderClass:it},Appear:{renderClass:ut},Custom:{renderClass:k}};f.START_POSITION={TopLeft:{xPercent:0,xPosition:-1,xOffset:-1,yPercent:0,yPosition:-1,yOffset:-1},TopLeftTop:{xPercent:0,xPosition:0,xOffset:1,yPercent:0,yPosition:-1,yOffset:-1},Top:{xPercent:.5,xPosition:-.5,xOffset:0,yPercent:0,yPosition:-1,yOffset:-1},TopRightTop:{xPercent:1,xPosition:-1,xOffset:-1,yPercent:0,yPosition:-1,yOffset:-1},TopRight:{xPercent:1,xPosition:0,xOffset:1,yPercent:0,yPosition:-1,yOffset:-1},TopRightRight:{xPercent:1,xPosition:0,xOffset:1,yPercent:0,yPosition:0,yOffset:1},Right:{xPercent:1,xPosition:0,xOffset:1,yPercent:.5,yPosition:-.5,yOffset:0},BottomRightRight:{xPercent:1,xPosition:0,xOffset:1,yPercent:1,yPosition:-1,yOffset:-1},BottomRight:{xPercent:1,xPosition:0,xOffset:1,yPercent:1,yPosition:0,yOffset:1},BottomRightBottom:{xPercent:1,xPosition:-1,xOffset:-1,yPercent:1,yPosition:0,yOffset:1},Bottom:{xPercent:.5,xPosition:-.5,xOffset:0,yPercent:1,yPosition:0,yOffset:1},BottomLeftBottom:{xPercent:0,xPosition:0,xOffset:1,yPercent:1,yPosition:0,yOffset:1},BottomLeft:{xPercent:0,xPosition:-1,xOffset:-1,yPercent:1,yPosition:0,yOffset:1},BottomLeftLeft:{xPercent:0,xPosition:-1,xOffset:-1,yPercent:1,yPosition:-1,yOffset:-1},Left:{xPercent:0,xPosition:-1,xOffset:-1,yPercent:.5,yPosition:-.5,yOffset:0},TopLeftLeft:{xPercent:0,xPosition:-1,xOffset:-1,yPercent:0,yPosition:0,yOffset:1}};f.END_POSITION={TopLeft:{xPercent:0,xOffset:1,yPercent:0,yOffset:1},Top:{xPercent:.5,xOffset:0,yPercent:0,yOffset:1},TopRight:{xPercent:1,xOffset:-1,yPercent:0,yOffset:1},Left:{xPercent:0,xOffset:1,yPercent:.5,yOffset:0},Center:{xPercent:.5,xOffset:0,yPercent:.5,yOffset:0},Right:{xPercent:1,xOffset:-1,yPercent:.5,yOffset:0},BottomLeft:{xPercent:0,xOffset:1,yPercent:1,yOffset:-1},Bottom:{xPercent:.5,xOffset:0,yPercent:1,yOffset:-1},BottomRight:{xPercent:1,xOffset:-1,yPercent:1,yOffset:-1}};f.prototype.setRules=function(n,t){var f,i,r;if(n&&t){for(f in n){i=n[f];r=null;switch(i.type){case u.TYPE.NUMBER_OF_PAGE_VIEWS:r=new ft(i.order,this.buttonId,p.getPageCount(),i.operator,parseInt(i.value,10));break;case u.TYPE.URL_MATCH:r=new ft(i.order,this.buttonId,p.getCurrentPage(),i.operator,i.value);break;case u.TYPE.SECONDS_ON_PAGE:r=new et(i.order,this.buttonId,(new Date).getTime(),i.operator,1e3*parseInt(i.value,10));break;case u.TYPE.SECONDS_ON_SITE:r=new et(i.order,this.buttonId,parseInt(p.getSessionStart(),10),i.operator,1e3*parseInt(i.value,10));break;case u.TYPE.CUSTOM_VARIABLE:r=new vt(i.order,this.buttonId,i.name,i.operator,i.value);nt.hasOwnProperty(i.name)||(nt[i.name]=[]);nt[i.name].push(this.buttonId)}null!=r&&this.addRule(r)}this.filterLogic=t;this.ruleTree=d(t)}};f.prototype.setOnlineState=function(n){n||null===this.inviteTimeout||(clearTimeout(this.inviteTimeout),this.inviteTimeout=null);n||null===this.autoRejectTimeout||(clearTimeout(this.autoRejectTimeout),this.autoRejectTimeout=null);i.prototype.setOnlineState.call(this,n)};f.prototype.isActive=function(){return this.active};f.prototype.setActive=function(n){this.active=n};f.prototype.addTracker=function(n){this.trackers=[];i.prototype.addTracker.call(this,n)};f.prototype.getTracker=function(){if(1!=this.trackers.length)throw Error("InviteButtons should have exactly 1 tracker");return this.trackers[0]};f.prototype.startChat=function(n){return this.active&&i.prototype.startChat.call(this,n)?(this.getTracker().accept(),!0):!1};f.prototype.rejectChat=function(){return this.active&&i.prototype.rejectChat.call(this)?(this.getTracker().reject(),!0):!1};f.prototype.trigger=function(){var t,i;return n.getCookie("liveagent_invite_rejected_"+this.buttonId)?!1:(t=!0,null!=this.ruleTree&&(n.logGroupStart("Invite "+this.buttonId+" Rule Evaluation"),n.log("Filter Logic: "+this.filterLogic),t=this.ruleTree.evaluate(this),n.logGroupEnd()),t||null==this.inviteDelay||(i=this,this.inviteTimeout=window.setTimeout(function(){i.setOnlineState(!0)},this.inviteDelay),this.inviteDelay=null),t)};f.prototype.addRule=function(n){this.rules[n.getId()]=n};f.prototype.getRule=function(n){return this.rules[n]};f.prototype.getInviteDelay=function(){return this.inviteDelay};f.prototype.setInviteDelay=function(t){n.log("Setting invite delay to: "+t);this.inviteDelay=t};f.prototype.setAutoRejectTimeout=function(n){this.autoRejectTimeout=n};y.prototype=new h;y.prototype.setState=function(n){n&&!ti&&c(this.buttonId).trigger()&&h.prototype.setState.call(this,!0)?(ti=!0,g=this.buttonId,this.renderer.render()):!n&&c(this.buttonId).isActive()&&h.prototype.setState.call(this,!1)&&(ti=!1,this.remove(!0))};y.prototype.renderFinish=function(){if(c(this.buttonId).setActive(!0),-1!=this.rejectTime){var n=this.buttonId;c(this.buttonId).setAutoRejectTimeout(window.setTimeout(function(){c(n).rejectChat()},1e3*this.rejectTime))}this.renderer.renderFinish()};y.prototype.accept=function(){this.hasInviteAfterAccept||n.setCookie("liveagent_invite_rejected_"+this.buttonId,!0,!1);this.remove(!1)};y.prototype.reject=function(){this.hasInviteAfterReject||n.setCookie("liveagent_invite_rejected_"+this.buttonId,!0,!1);this.remove(!0)};y.prototype.remove=function(n){c(this.buttonId).setActive(!1);this.renderer.remove(n)};y.prototype.removeFinish=function(){this.renderer.remove(!1)};s.prototype.init=function(t,i,r,u){window.innerWidth?this.realWidth=window.innerWidth:document.documentElement&&document.documentElement.clientWidth?this.realWidth=document.documentElement.clientWidth:document.body&&(this.realWidth=document.body.clientWidth);window.innerHeight?this.realHeight=window.innerHeight:document.documentElement&&document.documentElement.clientHeight?this.realHeight=document.documentElement.clientHeight:document.body&&(this.realHeight=document.body.clientHeight);this.offset=25;this.buttonId=t;this.animationPrefix=n.getCssAnimation(i);this.element=i;this.element.style.position=null!==this.animationPrefix?"fixed":"absolute";this.element.style.left="-1000px";this.element.style.top="-1000px";this.element.style.zIndex="10000";this.element.style.display="";this.width=this.element.offsetWidth;this.height=this.element.offsetHeight;this.startPosition=r;this.endPosition=u};s.prototype.render=function(){this.element.style.display=""};s.prototype.renderFinish=function(){};s.prototype.remove=function(){this.element.style.left="-1000px";this.element.style.top="-1000px"};s.prototype.addRenderListeners=function(){var r=this.buttonId,t="AnimationIteration",i="AnimationEnd";""==this.animationPrefix?(t=t.toLowerCase(),i=i.toLowerCase()):(t=this.animationPrefix+t,i=this.animationPrefix+i);n.addEventListener(this.element,t,function(){b(r).renderFinish()});n.addEventListener(this.element,i,function(){b(r).removeFinish()})};tt.prototype=new s;tt.prototype.render=function(){var t;s.prototype.addRenderListeners.call(this);var i=this.width*this.startPosition.xPosition+this.offset*this.startPosition.xOffset,r=this.height*this.startPosition.yPosition+this.offset*this.startPosition.yOffset,u=-1*this.width*this.endPosition.xPercent+this.offset*this.endPosition.xOffset,f=-1*this.height*this.endPosition.yPercent+this.offset*this.endPosition.yOffset,n="";""!==this.animationPrefix&&(n="-"+this.animationPrefix+"-");t=document.createElement("style");t.innerHTML="@"+n+"keyframes slide"+this.buttonId+"{from { margin-left: "+i+"px; margin-top: "+r+"px; left: "+100*this.startPosition.xPercent+"%; top: "+100*this.startPosition.yPercent+"%; }to { margin-left: "+u+"px; margin-top: "+f+"px; left: "+100*this.endPosition.xPercent+"%; top: "+100*this.endPosition.yPercent+"%; }}";document.getElementsByTagName("head")[0].appendChild(t);this.element.style[n+"animation-name"]="slide"+this.buttonId;this.element.style[n+"animation-duration"]="1s";this.element.style[n+"animation-iteration-count"]="2";this.element.style[n+"animation-direction"]="alternate";this.element.style[n+"animation-timing-function"]="ease-in-out";this.element.style.setProperty(n+"animation-name","slide"+this.buttonId,"");this.element.style.setProperty(n+"animation-duration","1s","");this.element.style.setProperty(n+"animation-iteration-count","2","");this.element.style.setProperty(n+"animation-direction","alternate","");this.element.style.setProperty(n+"animation-timing-function","ease-in-out","");s.prototype.render.call(this)};tt.prototype.renderFinish=function(){var n="";""!==this.animationPrefix&&(n="-"+this.animationPrefix+"-");this.element.style[n+"animation-play-state"]="paused";this.element.style.setProperty(n+"animation-play-state","paused","")};tt.prototype.remove=function(n){var t="";""!==this.animationPrefix&&(t="-"+this.animationPrefix+"-");n?(this.element.style[t+"animation-play-state"]="running",this.element.style.setProperty(t+"animation-play-state","running","")):(this.element.style[t+"animation-name"]="",this.element.style.setProperty(t+"animation-name","",""),s.prototype.remove.call(this,n))};it.prototype=new s;it.prototype.render=function(){var n,t;s.prototype.addRenderListeners.call(this);n="";""!==this.animationPrefix&&(n="-"+this.animationPrefix+"-");t=document.createElement("style");t.innerHTML="@"+n+"keyframes fade"+this.buttonId+"{from { opacity: 0; }to { opacity: 1; }}";document.getElementsByTagName("head")[0].appendChild(t);this.element.style[n+"animation-name"]="fade"+this.buttonId;this.element.style[n+"animation-duration"]="1s";this.element.style[n+"animation-iteration-count"]="2";this.element.style[n+"animation-direction"]="alternate";this.element.style[n+"animation-timing-function"]="ease-in-out";this.element.style.setProperty(n+"animation-name","fade"+this.buttonId,"");this.element.style.setProperty(n+"animation-duration","1s","");this.element.style.setProperty(n+"animation-iteration-count","2","");this.element.style.setProperty(n+"animation-direction","alternate","");this.element.style.setProperty(n+"animation-timing-function","ease-in-out","");this.element.style.marginLeft=-1*this.width*this.endPosition.xPercent+this.offset*this.endPosition.xOffset+"px";this.element.style.left=100*this.endPosition.xPercent+"%";this.element.style.marginTop=-1*this.height*this.endPosition.yPercent+this.offset*this.endPosition.yOffset+"px";this.element.style.top=100*this.endPosition.yPercent+"%";s.prototype.render.call(this)};it.prototype.renderFinish=function(){var n="";""!==this.animationPrefix&&(n="-"+this.animationPrefix+"-");this.element.style[n+"animation-play-state"]="paused";this.element.style.setProperty(n+"animation-play-state","paused","")};it.prototype.remove=function(n){var t="";""!==this.animationPrefix&&(t="-"+this.animationPrefix+"-");n?(this.element.style[t+"animation-play-state"]="running",this.element.style.setProperty(t+"animation-play-state","running",""),this.element.style.opacity=0):(this.element.style[t+"animation-name"]="",this.element.style.setProperty(t+"animation-name","",""),s.prototype.remove.call(this,n))};ut.prototype=new s;ut.prototype.render=function(){this.element.style.marginLeft=-1*this.width*this.endPosition.xPercent+this.offset*this.endPosition.xOffset+"px";this.element.style.left=100*this.endPosition.xPercent+"%";this.element.style.marginTop=-1*this.height*this.endPosition.yPercent+this.offset*this.endPosition.yOffset+"px";this.element.style.top=100*this.endPosition.yPercent+"%";s.prototype.render.call(this);b(this.buttonId).renderFinish()};ut.prototype.remove=function(n){n?b(this.buttonId).removeFinish():s.prototype.remove.call(this,n)};k.prototype=new s;k.prototype.render=function(){b(this.buttonId).renderFinish()};k.prototype.renderFinish=function(){};k.prototype.remove=function(n){n&&b(this.buttonId).removeFinish()};u.TYPE={NUMBER_OF_PAGE_VIEWS:"NUMBER_OF_PAGE_VIEWS",URL_MATCH:"URL_MATCH",SECONDS_ON_PAGE:"SECONDS_ON_PAGE",SECONDS_ON_SITE:"SECONDS_ON_SITE",CUSTOM_VARIABLE:"CUSTOM_VARIABLE"};u.OPERATOR={EQUALS:"EQUALS",NOT_EQUAL:"NOT_EQUAL",START_WITH:"START_WITH",CONTAINS:"CONTAINS",NOT_CONTAIN:"NOT_CONTAIN",LESS_THAN:"LESS_THAN",GREATER_THAN:"GREATER_THAN",LESS_OR_EQUAL:"LESS_OR_EQUAL",GREATER_OR_EQUAL:"GREATER_OR_EQUAL"};u.prototype.init=function(n,t,i,r,u){this.ruleId=n;this.buttonId=t;this.compareFrom=i;this.operator=r;this.compareTo=u};u.prototype.getId=function(){return this.ruleId};u.prototype.evaluate=function(t,i){switch(this.operator){case u.OPERATOR.EQUALS:return n.log("Evaluate: "+t+" == "+i),t==i;case u.OPERATOR.NOT_EQUAL:return n.log("Evaluate: "+t+" != "+i),t!=i;case u.OPERATOR.START_WITH:return n.log("Evaluate: "+t+" indexOf "+i+" == 0"),0==t.indexOf(i);case u.OPERATOR.CONTAINS:return n.log("Evaluate: "+t+" indexOf "+i+" != -1"),-1!=t.indexOf(i);case u.OPERATOR.NOT_CONTAIN:return n.log("Evaluate: "+t+" indexOf "+i+" == -1"),-1==t.indexOf(i);case u.OPERATOR.LESS_THAN:return n.log("Evaluate: "+parseFloat(t)+" < "+parseFloat(i)),parseFloat(t)<parseFloat(i);case u.OPERATOR.GREATER_THAN:return n.log("Evaluate: "+parseFloat(t)+" > "+parseFloat(i)),parseFloat(t)>parseFloat(i);case u.OPERATOR.LESS_OR_EQUAL:return n.log("Evaluate: "+parseFloat(t)+" <= "+parseFloat(i)),parseFloat(t)<=parseFloat(i);case u.OPERATOR.GREATER_OR_EQUAL:return n.log("Evaluate: "+parseFloat(t)+" >= "+parseFloat(i)),parseFloat(t)>=parseFloat(i)}};ft.prototype=new u;ft.prototype.evaluate=function(){return n.log("Evaluating StandardInviteRule"),u.prototype.evaluate.call(this,this.compareFrom,this.compareTo)};et.prototype=new u;et.prototype.evaluate=function(){n.log("Evaluating TimerInviteRule");var t=(new Date).getTime()-this.compareFrom,i=u.prototype.evaluate.call(this,t,this.compareTo);return!i&&t<=this.compareTo&&(t=this.compareTo-t,(null==c(this.buttonId).getInviteDelay()||t<c(this.buttonId).getInviteDelay())&&c(this.buttonId).setInviteDelay(t)),i};vt.prototype=new u;vt.prototype.evaluate=function(){return ii.hasOwnProperty(this.compareFrom)?(n.log("Evaluating CustomInviteRule"),u.prototype.evaluate.call(this,ii[this.compareFrom].toString(),this.compareTo)):(n.log("CustomInviteRule evaluation failed due to missing custom variable"),!1)};ri=0;v.prototype.init=function(n,t){this.left=n;this.right=t};v.prototype.evaluate=function(){return!1};yt.prototype=new v;yt.prototype.evaluate=function(t){return n.log("Evaluating Atom Node: "+this.ruleId),t.getRule(this.ruleId).evaluate()};pt.prototype=new v;pt.prototype.evaluate=function(t){return n.logGroupStart("Evaluating And Node"),t=this.left.evaluate(t)&&this.right.evaluate(t),n.logGroupEnd(),t};wt.prototype=new v;wt.prototype.evaluate=function(t){return n.logGroupStart("Evaluating Or Node"),t=this.left.evaluate(t)||this.right.evaluate(t),n.logGroupEnd(),t};bt.prototype=new v;bt.prototype.evaluate=function(t){return n.logGroupStart("Evaluating Not Node"),t=!this.left.evaluate(t),n.logGroupEnd(),t};ci.prototype.toJSON=function(){return{label:this.getLabel(),value:this.getValue(),displayToAgent:this.getDisplayToAgent(),entityMaps:this.getMapper().getEntityMaps(),transcriptFields:this.getMapper().getTranscriptFields(),doKnowledgeSearch:this.getDoKnowledgeSearch()}};kt.prototype.map=function(n,t,i,r,u){"undefined"==typeof i&&(i=!0);"undefined"==typeof r&&(r=!0);"undefined"==typeof u&&(u=!0);this.getEntityMaps().push(new li(n,t,i,r,u))};kt.prototype.saveToTranscript=function(n){this.getTranscriptFields().push(n)};li.prototype.toJSON=function(){return{entityName:this.getEntityName(),fieldName:this.getFieldName(),fastFill:this.getFastFill(),autoQuery:this.getAutoQuery(),exactMatch:this.getExactMatch()}};w={};e._=w;w.handlePing=function(n){o.connection.handlePing(n)};w.error=function(t){t?n.log("Server Error: "+t):n.log("Server responded with an error.");dt()};w.warning=function(t){t?n.log("Server Warning: "+t):n.log("Server sent an anoymous warning.")};w.setNewPtid=function(n){l.setPermanentId(n)};w.clearStorage=function(){p.clear()};e.init=function(i,r,u){if("string"!=typeof i)throw Error("The url to init must be strings");if(!n.isOrganizationId(u))throw Error("Invalid OrganizationId Parameter Value: "+u);if(!n.isDeploymentId(r))throw Error("Invalid DeploymentId Parameter Value: "+r);t.url=i;t.deploymentId=r;t.orgId=u;n.log("System Initialized. Waiting for the DOM to be ready");"complete"===document.readyState?setTimeout(ot,1):document.addEventListener?(document.addEventListener("DOMContentLoaded",ot,!1),window.addEventListener("load",ot,!1)):window.attachEvent?window.attachEvent("onload",ot):n.log("No available event model. Exiting.")};e.getSid=function(){return a};e.enableLogging=function(){st=!0};e.setLocation=function(){};e.setChatWindowWidth=function(n){t.chatWindowWidth=n};e.setChatWindowHeight=function(n){t.chatWindowHeight=n};e.disconnect=function(){dt()};e.startChat=function(n,t,i){(t?rt(n,t):r[n]).startChat("liveagent"+Math.round(1e5*Math.random())+(new Date).getTime(),i)};e.startChatWithWindow=function(n,t,i,u){(i?rt(n,i):r[n]).startChat(t,u)};e.rejectChat=function(n){r[n].rejectChat()};e.showWhenOnline=function(n,t,i){if(o.connection.isRunning())throw Error("You cannot add a button after page initialization.");n=i?rt(n,i):hi(n);n.addTracker(new lt(n.buttonId,t))};e.showWhenOffline=function(n,t,i){if(o.connection.isRunning())throw Error("You cannot add a button after page initialization.");n=i?rt(n,i):hi(n);n.addTracker(new at(n.buttonId,t))};e.addCustomDetail=function(n,t,i){var r,u;if(o.connection.isRunning())throw Error("You cannot add a detail after page initialization.");if("undefined"==typeof n||"undefined"==typeof t||null===n||null===t)throw Error("CustomDetail contains null value");return r=new ci(n,t,i),nr.push(r),u={map:function(n,t,i,f,e){if("undefined"==typeof n||null===n||"undefined"==typeof t||null===t||null===i||null===f||null===e)throw Error("CustomDetail.map contains null value");return r.getMapper().map(n,t,i,f,e),u},saveToTranscript:function(n){if("undefined"==typeof n||null===n)throw Error("CustomDetail.saveToTranscript contains null value");return r.getMapper().saveToTranscript(n),u},doKnowledgeSearch:function(){return r.setDoKnowledgeSearch(),u}}};e.setName=function(n){if(o.connection.isRunning())throw Error("You cannot set the name after page initialization.");fi=n};e.addButtonEventHandler=function(n,t){"function"==typeof t&&(ei[n]=t)};e.BUTTON_EVENT=i.EVENT;e.setCustomVariable=function(n,t){var i,r;if(ii[n]=t,nt.hasOwnProperty(n))for(i=0;i<nt[n].length;i++)r=c(nt[n][i]),r.getOnlineState()&&r.setOnlineState(!0)};e.findOrCreate=function(n){var t,i;if(o.connection.isRunning())throw Error("You cannot find or create after page initialization.");return t=new ai(n),tr.push(t),i={map:function(n,r,u,f,e){return t.getEntityMapper().map(n,r,u,f,e),i},saveToTranscript:function(n){return t.setSaveTranscript(n),i},showOnCreate:function(){return t.setShowOnCreate(!0),i},linkToEntity:function(n,r){return oi.hasOwnProperty(n)&&oi[n]==t.getEntityName()?(gt("Warning: Recursive links detected, skip link "+t.getEntityName()+" to "+n),i):(t.setLinkToEntityName(n),t.setLinkToEntityField(r),oi[t.getEntityName()]=n,i)}}};e.addURLPrefix=function(i){if(o.connection.isRunning())throw Error("You cannot set a URL Prefix after page initialization.");if("string"!=typeof i)throw Error("The parameter to addURLPrefix must be a string");t.url=n.addPrefixToURL(t.url,i,!0);t.urlPrefix=i};o={VisitorMessage:{ERROR:"Error",WARNING:"Warning"},SystemMessage:{ASYNC_RESULT:"AsyncResult",SWITCH_SERVER:"SwitchServer"}},function(){var f=null,u=!1,i=null,r=null,n={};(function(){n.send=function(u,e){var c,l;if(null!==i)n.onError.call(window,"Did not handle response before sending another message");else{"undefined"==typeof e&&(e={});var s="Visitor",o="",h=!1;for(1<u.length?(s="System",o="MultiNoun",e.nouns="",h=!0):o=u[0].getName(),s=t.url+"/rest/"+s+"/"+o+".jsonp?",o=0;o<u.length;o++){h&&(e.nouns+=u[o].getName()+",");e[u[o].getName()+".prefix"]="Visitor";for(c in u[o].getData())u[o].getData().hasOwnProperty(c)&&(e[u[o].getName()+"."+c]=u[o].getData()[c])}h&&(e.nouns=e.nouns.substr(0,e.nouns.length-1));for(l in e)e.hasOwnProperty(l)&&(s+=l+"="+e[l]+"&");s+="callback="+f;s+="&deployment_id="+t.deploymentId;s+="&org_id="+t.orgId;s+="&version=36";h=document.createElement("script");h.type="text/javascript";h.src=s;i=document.body.appendChild(h);r=window.setTimeout(function(){n.onError.call(window,"Server failed to respond.")},t.pingTimeout)}};n.handlePing=function(t){r&&(clearTimeout(r),r=null);u=!0;t=t.messages;for(var f=0;f<t.length;f++)n.messageHandler.call(window,t[f].type,t[f].message);n.onSuccess.call(window);null!==i&&(document.body.removeChild(i),i=null)};n.messageHandler=function(){};n.onSuccess=function(){};n.onError=function(){};n.isRunning=function(){return u};n.setIsRunning=function(n){u=n};n.setCallback=function(n){f=n}})();o.connection=n;o.Noun=function(n,t){this.getName=function(){return n};this.getData=function(){return t}}}();ai.prototype.toJSON=function(){return{entityName:this.getEntityName(),saveToTranscript:this.getSaveTranscript(),showOnCreate:this.getShowOnCreate(),linkToEntityName:this.getLinkToEntityName(),linkToEntityField:this.getLinkToEntityField(),entityFieldsMaps:this.getEntityMapper().getEntityFieldsMaps()}};vi.prototype.map=function(n,t,i,r,u){"undefined"==typeof i&&(i=!0);"undefined"==typeof r&&(r=!0);"undefined"==typeof u&&(u=!0);this.getEntityFieldsMaps().push(new yi(n,t,i,r,u))};yi.prototype.toJSON=function(){return{fieldName:this.getFieldName(),label:this.getLabel(),doFind:this.getDoFind(),isExactMatch:this.getIsExactMatch(),doCreate:this.getDoCreate()}};var a=n.getCookie("liveagent_sid"),ui=n.getCookie("liveagent_chatted"),gi=!1,st=!1,r={},nr=[],tr=[],fi=null,ei={},ht=null,oi={},t={url:null,deploymentId:null,orgId:null,pingRate:null,pingTimeout:5e3,chatWindowWidth:482,chatWindowHeight:450,contentServerUrl:null,chatPage:"/s/chat",prechatHandler:"/s/prechatVisitor"};o.connection.messageHandler=function(i,u){var e,f,h;switch(i){case"VisitorId":u.sessionId&&(n.log("Received new session ID"),a=u.sessionId,document.cookie="liveagent_sid="+encodeURIComponent(a)+";path=/;",null!=l.getVisitCount()&&l.setVisitCount(l.getVisitCount()+1),l.getPermanentId()||l.setPermanentId(a));break;case"Settings":for(p.init(),n.log("Ping rate set to "+u.pingRate+"ms"),t.pingRate=u.pingRate,t.contentServerUrl=u.contentServerUrl,t.prefixKey=u.prefixKey,e=0;e<u.buttons.length;e++)switch(u.buttons[e].type){case"ToAgent":case"Standard":f=u.buttons[e];h=r[f.id];h&&wi(h,f);break;case"Invite":var f=u.buttons[e],s=null,s=f.inviteImageUrl?rr(f.id,f.inviteImageUrl,f.inviteImageWidth,f.inviteImageHeight):document.getElementById("liveagent_invite_button_"+f.id);null==s?gt("Warning: Button "+f.id+" disabled because HTML element was not found"):(h=c(f.id),h.addTracker(new y(f.id,s,f.inviteRenderer,f.inviteStartPosition,f.inviteEndPosition,f.hasInviteAfterAccept,f.hasInviteAfterReject,f.inviteRejectTime)),s=n.jsonDecode(f.inviteRules),h.setRules(s.rules,s.filter),wi(h,f))}break;case"Availability":for(e={},f=0;f<u.results.length;f++)(h=r[u.results[f].id])&&(e[u.results[f].id]={button:h,isAvailable:u.results[f].isAvailable});null!=g&&e.hasOwnProperty(g)&&(e[g].button.setOnlineState(e[g].isAvailable),delete e[g]);for(s in e)e.hasOwnProperty(s)&&e[s].button.setOnlineState(e[s].isAvailable);break;case o.VisitorMessage.WARNING:gt(u.text);break;case o.VisitorMessage.ERROR:di(u.text);break;case o.SystemMessage.SWITCH_SERVER:if(e=u.newUrl,"string"==typeof e)t.url=e,n.log("Received updated LiveAgent server url: "+e+"! Consider updating this site's deployment code.");else throw Error("Trying to set invalid LiveAgent server url: "+e);a=null}};o.connection.onSuccess=function(){null!==ht&&clearTimeout(ht);ht=window.setTimeout(ur,t.pingRate)};o.connection.onError=function(n){di(n)}}})()