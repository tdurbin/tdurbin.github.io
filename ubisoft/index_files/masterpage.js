(function(n){function o(i){n.each(i.profiles,function(i,r){r.platformType=="uplay"&&n(t.nameHolderId).html(r.nameOnPlatform)})}function s(){a();h();v()}function h(){var i=n(t.topFaqsId),r=i.data(t.showFallbackWarningDataAttribute)&&i.attr("data-"+t.faqTotalRecordsAttribute)!="0";r&&f(!0)}function c(){n(".hero").addClass("hero--no-logo")}function f(i){var r=n("."+t.fallbackLanguageClass);if(r.length!=0&&typeof i=="boolean"){i===!0?r.show():r.hide();return}}function l(){n("section.hero").removeClass("hero--secondary").addClass("hero--main")}function a(){var i=n.cookie(cookieNames.openCasesCount);i!==undefined&&i!="0"&&n("."+t.openCasesClass).text(i)}function v(){n("a.btn-nav.btn-nav--search, .search-box--feature__btn").click(function(){e=setInterval(function(){if(n('div.section-results > ul[class="faqs__list"]')){n("div.section-results").on("click",'ul[class="faqs__list"] li',function(){var t=n(this).find("a").attr("href"),i=t.split("/")[3],r=n('div.search-box__field > input[name="search"]').val();global.localStorage.save(i,r)});clearInterval(e)}},500)})}function y(){var n=global.localStorage.get(settings.faqTrace.key);return n?JSON.parse(n):""}function p(){global.localStorage.delete(settings.faqTrace.key)}var t={topFaqsId:"#faqs",showFallbackWarningDataAttribute:"show-warning",faqTotalRecordsAttribute:"total-records",nameHolderId:"#userNameHolder",mustShowFallbackWarningId:"mustShowFallbackWarning",openCasesClass:"open-case-count",fallbackLanguageClass:"fallback-lang",alertUplayOverlayClass:"alert-uplay-overlay"},r={showUplayOverlayAlert:function(i){i||(i="");var r=n("."+t.alertUplayOverlayClass);n(".text",r).html(i);r.css("display","table")},hideUplayOverlayAlert:function(){var i=n("."+t.alertUplayOverlayClass);i.css("display","none")}},u=!1,e,i;n.subscribe(global.lastGamesPlayed.events.populateInit,function(){u=!0;r.showUplayOverlayAlert(settings.signIn.uplayOverlayLoadPlayHistory)});n.subscribe(global.lastGamesPlayed.events.populateSuccess,function(){u&&r.showUplayOverlayAlert(settings.signIn.uplayOverlayReloadPage)});n.subscribe(global.ubiServices.events.userProfileSuccess,function(n,t){o(t);global.lastGamesPlayed.initialize(t)});global.ubiServices.getUserProfiles();s();i={};window.masterpage=i;i.uplayOverlayAlert=r;i.showFallbackWarning=f;i.showLogoTitle=c;i.setToMainHero=l;i.GetFaqsHistory=y;i.clearFaqsHistory=p})(jQuery)